<!DOCTYPE html>

<html>

<head>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Material+Icons+Outlined" rel="stylesheet">

    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <link rel="stylesheet" type="text/css" href="/Style.css">
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3/dist/js.cookie.min.js"></script>
    <title>FLAGLE</title>
</head>

<body>
    <div id="loading"></div>
    <div class="HeaderBody">
        <div class="MainHeader">

            
            <span class="material-icons-outlined" id="howto">help_outline</span>
            <span class="material-icons-outlined" id="flag">flag</span>

            <div id="MainHeaderText">
                <div class="wavy">
                    <span class="flaggletext" style="--i:1"><t id="ft1">F</t></span>
                    <span class="flaggletext" style="--i:2"><t id="ft2">L</t></span>
                    <span class="flaggletext" style="--i:3"><t id="ft3">A</t></span>
                    <span class="flaggletext" style="--i:4"><t id="ft4">G</t></span>
                    <span class="flaggletext" style="--i:5"><t id="ft5">L</t></span>
                    <span class="flaggletext" style="--i:6"><t id="ft6">E</t></span>
                </div>
            </div>

            
            <span class="material-icons-outlined" id="stats">leaderboard</span>
            <span class="material-icons-outlined" id="settings">settings</span>
        </div>
    </div>

    <div id="gamediv">

        <button class="displaybuttons" id="dailyflaggle"><b>DAILY</b></button>
        <div id="middlediv">
            <div id="drnotif">
                <text id="drnotiftext">DAILY</text>
            </div>
            <button id="guesses">
            </button>
        </div>
        <button class="displaybuttons" id="randomflaggle"><b>RANDOM</b></button>

        <div id="choices"></div>

    </div>


    <!--Game Result Popup-->
    <div id="GameResults" class="modal">
        <div id="gameresults-content" class="modal-content">
            <div class="modal-header" id="resultsmodalheader">
                <span class="close" id="closeresults">&times;</span>
                <h3 class="modalheadertext" id="gameoverresult">Correct!</h3>
            </div>
            <div class="modal-body" id="resultsmodalbody">
                <div id="flaggleresultsdata">
                    <img id="flagglepic"></br>
                    <text id="flagglenamedisplay"></text></br>
                    <div id="resultguesses"></div>
                    <text id="dailyflaggledate"></text>
                </div>

            </div>
            <div class="modalfooter">
                <div class="footerhalf " id="footerleft">
                    <text id="nextdaily">Next Daily</text>
                    <div class="dailycountdowndiv">
                        <text class="dailycountdowntext" id="dailycountdowntext_results">XX : XX : XX</text>
                    </div>
                </div>
                <div class="footerhalf " id="footerright">
                    <button class="displaybuttons" id="sharebutton"><b id="sharetext">Share</b></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        var modalresults = document.getElementById("GameResults");

        var spanresults = document.getElementById("closeresults");

        spanresults.onclick = function() {
            modalresults.style.display = "none";
        }
    </script>

    <div id="keyscontainer">
        <div id="colorkeys">
            <div class="colors" id="white" data-color="white">
            </div>
            <div class="colors" id="red" data-color="red">
            </div>
            <div class="colors" id="orange" data-color="orange">
            </div>
            <div class="colors" id="yellow" data-color="yellow">
            </div>
            <div class="colors" id="green" data-color="green">
            </div>
            <div class="colors" id="blue" data-color="blue">
            </div>
            <!-- <div class="colors" id="lightblue" data-color="lightblue">
            </div> -->
            <div class="colors" id="black" data-color="black">
            </div>
        </div>
    </div>

    <!--How to Modal-->
    <div id="howtotext" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="howtomodalheader">
                <span class="close" id="closehowto">&times;</span>
                <h3 class="modalheadertext">How to Play</h3>
            </div>
            <div class="modal-body" id="howtomodalbody">
                <p>Guess the <b>FLAGLE</b> in 6 tries.</p>
                <p>Use the <t class="colorchange">color buttons</t> to filter whether or not the <b>FLAGLE</b> contains the color.</p>

                <b>Example:</b>
                <div id="demodiv">
                    <div id="demokeyscontainer">
                        <div id="democolorkeys">
                            <div class="democolors" id="demoorange" data-color="orange">
                            </div>
                            <div class="democolors" id="demoyellow" data-color="yellow">
                            </div>
                            <div class="democolors" id="demogreen" data-color="green">
                            </div>
                        </div>
                    </div>

                    <div id="demotext">
                        <ul>
                            <li>The <b>FLAGLE</b> does <b>NOT</b> contain <text id="textorange">orange</text></li>
                            <li>The <b>FLAGLE</b> contains <text id="textgreen">green</text></li>
                        </ul>
                    </div>
                </div>
                
                <text>You win by:</text>
                <ul>
                    <li>Clicking on the correct flag <b>OR</b></li>
                    <li>Only the <b>FLAGLE</b> remains unfiltered</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        var modalhow = document.getElementById("howtotext");

        var btnhow = document.getElementById("howto");

        var spanhow = document.getElementById("closehowto");

        btnhow.onclick = function() {
            modalhow.style.display = "block";
        }
        spanhow.onclick = function() {
            modalhow.style.display = "none";
        }
    </script>

    <div id="statstext" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="statsmodalheader">
                <span class="close" id="closestat">&times;</span>
                <h3 class="modalheadertext">Statistics</h3>
            </div>
            <div class="modal-body" id="statsmodalbody">

                <div id="drchoice">
                    <button id="drchoiceleft">
                        <text class="statsmodetext">DAILY</text>
                    </button>
                    <button id="drchoiceright">
                        <text class="statsmodetext">RANDOM</text>
                    </button>
                </div>

                <div id="statsdisplay">
                    <div class="statstab" id="flagsguessed">
                        <text class="statstext" id="flagsguessedtext">0</text></br>
                        <text class="statsdesc" id="flagsguesseddesc">FLAGLEs Guessed</text>
                    </div>
                    <div class="statstab" id="winpercent">
                        <text class="statstext" id="winpercenttext">0</text></br>
                        <text class="statsdesc" id="winpercentdesc">Win %</text></br>
                    </div>
                    <div class="statstab" id="currentstreak">
                        <text class="statstext" id="currentstreaktext">0</text></br>
                        <text class="statsdesc" id="currentstreakdesc">Current Streak</text>
                    </div>
                    <div class="statstab" id="beststreak">
                        <text class="statstext" id="beststreaktext">0</text></br>
                        <text class="statsdesc" id="beststreakdesc">Best Streak</text>
                    </div>
                </div>

                <div class="modalfooter">
                    <div class="footerhalf " id="footerleft">
                        <text id="nextdaily">Next Daily</text>
                        <div class="dailycountdowndiv">
                            <text class="dailycountdowntext" id="dailycountdowntext_stats"></text>
                        </div>
                    </div>
                    <div class="footerhalf " id="footerright">
                        <button class="displaybuttons" id="sharebuttonstat"><b id="sharetextstat">Share</b></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        var modalstat = document.getElementById("statstext");

        var btnstat = document.getElementById("stats");

        var spanstat = document.getElementById("closestat");

        btnstat.onclick = function() {
            modalstat.style.display = "block";
        }

        spanstat.onclick = function() {
            modalstat.style.display = "none";
        }
    </script>

    <!-- Settings -->
    <div id="settingstext" class="modal">
        <div class="modal-content" id="settingsmodal">
            <div class="modal-header" id="settingsmodalheader">
                <span class="close" id="closesettings">&times;</span>
                <h3 class="modalheadertext">Settings</h3>
            </div>
            <div class="modal-body" id="settingsmodalbody">

                <div class="settingsdivsdiff" id="darktheme">
                    <text class="settingsfont">Difficulty    <t id="minidiff"># of flags (Random only)</t></text></br>
                    <text id="difficultyValue">30</text>
                </div>

                <div class="hmslidecontainer">
                    <input type="range" min="30" max="130" value="30" class="hmslider" id="difficultySlider" step="10">
                </div>

                <div class="settingsdivs" id="darktheme">
                    <text class="settingsfont">Dark Theme</text>
                    <label class="switch">
                        <input type="checkbox" id="darkthemeswitch">
                        <span class="slider round"></span>
                    </label>
                </div>

                <div id="disclaimer">
                    <text id="disctext">There are 197 flags currently in <b>FLAGLE</b>. All countries are based on the classification from <a class="textlink" href="https://www.sporcle.com/blog/2013/01/what-is-a-country/" target="_blank">sporcle.com</a>.</text></br></br>
                    <text id="disctext">All flags are the most recent versions used in <a class="textlink" href="https://www.wikipedia.org/" target="_blank">wikipedia.org</a>.</text></br>
                    <text id="disctextnosue">Please don't sue us. lol</text>
                </div>

                <div id="about">
                    <text>
                        Created by <a class="textlink" href="#">serin113</a> and <a class="textlink" href="#">LilRui</a>.</br>
                        Launched February 2022.</text>
                </div>
            </div>
        </div>
    </div>

    <script>
        var modalset = document.getElementById("settingstext");

        var btnset = document.getElementById("settings");

        var spanset = document.getElementById("closesettings");

        btnset.onclick = function() {
            modalset.style.display = "block";
        }

        spanset.onclick = function() {
            modalset.style.display = "none";
        }
    </script>

    <!-- Flag List Modal
    <div id="flaglist" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="flagsmodalheader">
                <span class="close" id="closeflag">&times;</span>
                <h3 class="modalheadertext">Flag List</h3>
            </div>
            <div class="modal-body" id="flagsmodalbody"> -->
                <!-- Searchbar Removed for now -->
                <!-- <div id="searchbarcontents">
                    <div id="searchbarbox"><input type="text" placeholder="Search Country" id="searchbar"></div>
                    <div id="searchbutton"><span id="searchicon" class="material-icons-outlined">search</span></div>
                </div> -->
                <!-- <h2 id="flaglistnotif" class="colorchange">Coming Soon!</h2>
            </div>
        </div>
    </div> -->

    <script>
        // // Get the modal
        // var modalflag = document.getElementById("flaglist");

        // // Get the button that opens the modal
        // var btnflag = document.getElementById("flag");

        // // Get the <span> element that closes the modal
        // var spanflag = document.getElementById("closeflag");

        // // When the user clicks the button, open the modal 
        // btnflag.onclick = function() {
        //     modalflag.style.display = "block";
        // }

        // // When the user clicks on <span> (x), close the modal
        // spanflag.onclick = function() {
        //     modalflag.style.display = "none";
        // }

        // // When the user clicks anywhere outside of the modal, close it

        var modalzoom = document.getElementById("zoommodalid");

        function clickOutsideModal(event) {
            // if (event.target == modalflag) {
            //     modalflag.style.display = "none";
            // } else 
            if (event.target == modalhow) {
                modalhow.style.display = "none";
            } else if (event.target == modalstat) {
                modalstat.style.display = "none";
            } else if (event.target == modalset) {
                modalset.style.display = "none";
            } else if (event.target == modalresults) {
                modalresults.style.display = "none";
            } else if (event.target == modalzoom) {
                modalzoom.style.display = "none";
            }
        }

        window.onclick = function(event) {
            clickOutsideModal(event)
        }
    </script>
    <script>
        let darkModeCookie = Cookies.get("darkMode")
        if (darkModeCookie === "true") {
            document.getElementById('darkthemeswitch').checked = true;
            console.log("dark mode")
        } else if (darkModeCookie === "false") {
            document.getElementById('darkthemeswitch').checked = false;
            console.log("light mode")
        }

        //Dark Theme
        const checkbox = document.getElementById('darkthemeswitch');

        function setTheme() {
            var body = document.body;

            //FLAGGLE Letters
            var mht = document.getElementById('MainHeaderText');
            var ft1 = document.getElementById('ft1');
            var ft2 = document.getElementById('ft2');
            var ft3 = document.getElementById('ft3');
            var ft4 = document.getElementById('ft4');
            var ft5 = document.getElementById('ft5');
            var ft6 = document.getElementById('ft6');
            // var ft7 = document.getElementById('ft7');

            //Color Keys
            var colorkeys = document.getElementById('colorkeys');

            //All Modals
            //Settings                
            var settingsmodalbody = document.getElementById('settingsmodalbody');
            var settingsmodalheader = document.getElementById('settingsmodalheader');
            var closesettings = document.getElementById('closesettings');

            //Flags
            // var flagsmodalbody = document.getElementById('flagsmodalbody');
            // var flagsmodalheader = document.getElementById('flagsmodalheader');
            // var closeflag = document.getElementById('closeflag');
            // var searchbar = document.getElementById('searchbar');

            //HowTo
            var howtomodalbody = document.getElementById('howtomodalbody');
            var howtomodalheader = document.getElementById('howtomodalheader');
            var closehowto = document.getElementById('closehowto');

            //Stats
            var statsmodalbody = document.getElementById('statsmodalbody');
            var statsmodalheader = document.getElementById('statsmodalheader');
            var closestat = document.getElementById('closestat');

            //Daily, Guesses, Random, and Share Buttons
            var dailyflaggle = document.getElementById('dailyflaggle');
            var randomflaggle = document.getElementById('randomflaggle');
            var guesses = document.getElementById('guesses');
            var sharebutton = document.getElementById('sharebutton');

            var middlediv = document.getElementById('middlediv');

            //democolors
            var demoorange = document.getElementById('demoorange');
            var demoyellow = document.getElementById('demoyellow');
            var demogreen = document.getElementById('demogreen');

            if (checkbox.checked) {
                Cookies.set("darkMode", "true", {
                    sameSite: 'strict'
                })
                body.classList.add("dark");

                mht.classList.add("dark");
                ft1.classList.add("dark_flaggletext");
                ft2.classList.add("dark_flaggletext");
                ft3.classList.add("dark_flaggletext");
                ft4.classList.add("dark_flaggletext");
                ft5.classList.add("dark_flaggletext");
                ft6.classList.add("dark_flaggletext");
                // ft7.classList.add("dark_flaggletext");

                colorkeys.classList.add("dark_colorkeys");

                settingsmodalbody.classList.add("dark");
                settingsmodalheader.classList.add("dark");
                closesettings.classList.add("dark");

                // flagsmodalbody.classList.add("dark");
                // flagsmodalheader.classList.add("dark");
                // closeflag.classList.add("dark");
                // searchbar.classList.add("dark");

                howtomodalbody.classList.add("dark");
                howtomodalheader.classList.add("dark");
                closehowto.classList.add("dark");

                statsmodalbody.classList.add("dark");
                statsmodalheader.classList.add("dark");
                closestat.classList.add("dark");

                dailyflaggle.classList.add("dark");
                randomflaggle.classList.add("dark");
                guesses.classList.add("dark");
                sharebutton.classList.add("dark");

                middlediv.classList.add("dark");

                demoorange.classList.add("dark");
                demoyellow.classList.add("dark");
                demogreen.classList.add("dark");
            } else {
                Cookies.set("darkMode", "false", {
                    sameSite: 'strict'
                })
                body.classList.remove("dark");

                mht.classList.remove("dark");
                ft1.classList.remove("dark_flaggletext");
                ft2.classList.remove("dark_flaggletext");
                ft3.classList.remove("dark_flaggletext");
                ft4.classList.remove("dark_flaggletext");
                ft5.classList.remove("dark_flaggletext");
                ft6.classList.remove("dark_flaggletext");
                // ft7.classList.remove("dark_flaggletext");

                colorkeys.classList.remove("dark_colorkeys");

                settingsmodalbody.classList.remove("dark");
                settingsmodalheader.classList.remove("dark");
                closesettings.classList.remove("dark");

                // flagsmodalbody.classList.remove("dark");
                // flagsmodalheader.classList.remove("dark");
                // closeflag.classList.remove("dark");
                // searchbar.classList.remove("dark");

                howtomodalbody.classList.remove("dark");
                howtomodalheader.classList.remove("dark");
                closehowto.classList.remove("dark");

                statsmodalbody.classList.remove("dark");
                statsmodalheader.classList.remove("dark");
                closestat.classList.remove("dark");

                dailyflaggle.classList.remove("dark");
                randomflaggle.classList.remove("dark");
                guesses.classList.remove("dark");
                sharebutton.classList.remove("dark");

                middlediv.classList.remove("dark");

                demoorange.classList.remove("dark");
                demoyellow.classList.remove("dark");
                demogreen.classList.remove("dark");
            }
        }

        setTheme()
        checkbox.addEventListener('change', setTheme)
    </script>
    <script src="GameLogic.js"></script>
    <script>
        window.onload = function() {
            let loading = document.getElementById("loading")
            loading.style.opacity = "0"
            loading.style.visibility = "hidden"
        }
    </script>
</body>

</html>